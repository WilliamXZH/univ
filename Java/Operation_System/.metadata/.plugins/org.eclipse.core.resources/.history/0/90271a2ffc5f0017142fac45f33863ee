package pers.william.main;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.Socket;
import java.util.concurrent.ThreadPoolExecutor;

import pers.william.po.Request;

public class MyThread implements Runnable {
	
	Socket s ;
	private ThreadPoolExecutor threadPoolExecutor;

	public MyThread(Socket s,ThreadPoolExecutor executor) {
		super();
		this.s = s;
		this.threadPoolExecutor = executor;
	}

	@Override
	public void run() {
		
		//System.out.println(s);
		BufferedReader reader = null;
		PrintStream writer = null;
		try {
			reader = new BufferedReader(new InputStreamReader(s.getInputStream()));
			writer = new PrintStream(s.getOutputStream());
			
			String line = reader.readLine();
			System.out.println(line);
			
			Request request = new Request(line.split(" ")[1]);

//			writer.println("HTTP/1.1 200 OK");
//			writer.println("Content-Type:text/plain");
//			writer.println("Content-Length:7");
			writer.println("response to client:"+s+", task:" + request + "finished!");
			writer.println();
			writer.flush();
			
			try {
				Thread.sleep(3000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}

}
