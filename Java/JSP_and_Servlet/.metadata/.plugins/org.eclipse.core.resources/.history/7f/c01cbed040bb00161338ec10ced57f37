package pers.william.server;

import java.io.IOException;
import java.net.BindException;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketException;
import java.util.List;
import java.util.ArrayList;

public class TemServer {
	
	private int port = 12345;
    public List<ClientThread> clients = new ArrayList<ClientThread>();

    public static void main(String[] args) throws IOException {
        new TemServer().startServer();
    }

    private void startServer() {
    	ServerSocket server;
		try{
			server=new ServerSocket(port);
			while(true){
				try{
					Socket s=server.accept();
					ClientThread client=new ClientThread(s);
					//client.setSocket(s);
					client.start();
					clients.add(client);
				}catch(SocketException e){
					//System.out.println(client.getName()+" is disconnect.");
				}
			}
		}catch(BindException e){
			port+=10;
			e.printStackTrace();
		}catch(IOException e){
			e.printStackTrace();
		} 	
    }

   

}
